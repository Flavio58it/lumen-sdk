{"version":3,"sources":["social.ts"],"names":[],"mappings":"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","file":"social.js","sourcesContent":["/// <reference path=\"../typings/main.d.ts\"/>\r\nangular.module('starter.controllers')\r\n\r\n.controller('SocialMonitorCtrl', function($scope, $stateParams, $log, $ionicScrollDelegate, ngstomp, Settings) {\r\n    $scope.posts = [];\r\n\r\n//    var stompUri = 'http://' + window.location.hostname + ':15674/stomp';\r\n    var settings = Settings.getSettings();\r\n    $log.info('Stomp connecting to', settings.stompUri);\r\n    $scope.client = ngstomp(settings.stompUri);\r\n    $scope.client.connect(settings.stompUser, settings.stompPassword, function() {\r\n        $log.info('Stomp connected to', settings.stompUri);\r\n        $scope.client.subscribe('/topic/lumen.*.social.perception', function(msg) {\r\n            var post = JSON.parse(msg.body);\r\n            $scope.posts.push(post);\r\n            $ionicScrollDelegate.scrollBottom(true);\r\n        });\r\n    }, function(err) {\r\n        $log.error('Stomp error:', err);\r\n        $scope.client = null;\r\n    }, '/');\r\n})\r\n\r\n.controller('SocialExpressCtrl', function($scope, $stateParams, $log, LumenStomp, Settings) {\r\n    $scope.agentIds = ['arkan'];\r\n    $scope.form = {\r\n        agentId: 'arkan'\r\n    };\r\n\r\n    $scope.posts = [];\r\n    $scope.networks = [\r\n        {'id': 'facebook', 'name': 'Facebook'},\r\n        {'id': 'twitter', 'name': 'Twitter'}\r\n    ];\r\n    $scope.post = {network: $scope.networks[0]};\r\n\r\n    // Agent\r\n    $scope.switchAgent = function() {\r\n        LumenStomp.unsubscribeAll();\r\n    };\r\n\r\n    $scope.$on('$ionicView.enter', function() {\r\n        LumenStomp.connect(function() {\r\n            $scope.client = LumenStomp.getClient();\r\n            $scope.switchAgent();\r\n        });\r\n    });\r\n    $scope.$on('$ionicView.beforeLeave', function() {\r\n        LumenStomp.disconnect();\r\n    });\r\n\r\n    $scope.submit = function() {\r\n        $scope.communicateAction = {\r\n            '@type': 'CommunicateAction',\r\n            object: $scope.post.message,\r\n        };\r\n        var topic = 'lumen.arkan.' + $scope.post.network.id + '.timeline.out';\r\n        $log.info('Posting to', topic, ':', JSON.stringify($scope.communicateAction));\r\n        $scope.client.send('/topic/' + topic, {}, JSON.stringify($scope.communicateAction));\r\n    };\r\n});"],"sourceRoot":"/source/"}