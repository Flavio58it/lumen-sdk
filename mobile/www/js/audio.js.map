{"version":3,"sources":["audio.ts"],"names":[],"mappings":"AAAA,4CAA4C;AAC5C,mCAAmC;AACnC,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC;KAEpC,UAAU,CAAC,kBAAkB,EAAE,UAAS,MAAM,EAAE,YAAY,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAClF,UAA+B;IAC/B,MAAM,CAAC,IAAI,GAAG,EACb,CAAC;IAEF,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;IACrB,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE;QAC3B,UAAU,CAAC,OAAO,CAAC;YACf,MAAM,CAAC,MAAM,GAAG,UAAU,CAAC,SAAS,EAAE,CAAC;YACvC,yBAAyB;YACzB,UAAU,CAAC,SAAS,CAAC,2BAA2B,EAAE,UAAS,QAAQ;gBAC/D,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBACpC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;gBAChF,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAsB,CAAC,GAAG,GAAG,GAAG,CAAC,UAAU,CAAC;gBAC7E,MAAM,CAAC,YAAY,EAAE,CAAC;YAC1B,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;IACH,MAAM,CAAC,GAAG,CAAC,wBAAwB,EAAE;QACjC,UAAU,CAAC,UAAU,EAAE,CAAC;IAC5B,CAAC,CAAC,CAAC;IAEH,QAAQ;IACR,MAAM,CAAC,YAAY,GAAG;QAClB,IAAI,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAqB,CAAC;QACrE,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC;QACtD,QAAQ,CAAC,IAAI,EAAE,CAAC;IACpB,CAAC,CAAC;AAEN,CAAC,CAAC,CAAC","file":"audio.js","sourcesContent":["/// <reference path=\"../typings/main.d.ts\"/>\n/// <reference path=\"services.ts\"/>\nangular.module('starter.controllers')\n\n.controller('AudioMonitorCtrl', function($scope, $stateParams, $log, $window, Settings, \n    LumenStomp: Services.LumenStomp) {\n    $scope.form = {\n    };\n\n    $scope.client = null;\n    $scope.$on('$ionicView.enter', function() {\n        LumenStomp.connect(function() {\n            $scope.client = LumenStomp.getClient();\n            // audio.out: AudioObject\n            LumenStomp.subscribe('/topic/avatar.*.audio.out', function(exchange) {\n                var msg = JSON.parse(exchange.body);\n                $log.info(\"Received audio\", msg.name, msg.contentType, msg.contentSize, 'bytes');\n                (document.getElementById('played') as HTMLMediaElement).src = msg.contentUrl;\n                $scope.replayPlayed();\n            });\n        });\n    });\n    $scope.$on('$ionicView.beforeLeave', function() {\n        LumenStomp.disconnect();\n    });\n\n    // Audio\n    $scope.replayPlayed = function() {\n        var playedEl = document.getElementById('played') as HTMLMediaElement;\n        $log.info('Playing played ', playedEl, 'seconds ...');\n        playedEl.play();\n    };\n\n});\n"],"sourceRoot":"/source/"}