{"version":3,"sources":["audio.ts"],"names":[],"mappings":"AAAA,4CAA4C;AAC5C,mCAAmC;AACnC,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC;KAEpC,UAAU,CAAC,kBAAkB,EAAE,UAAS,MAAM,EAAE,YAAY,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAClF,UAA+B;IAC/B,MAAM,CAAC,IAAI,GAAG,EACb,CAAC;IAEF,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;IACrB,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE;QAC3B,UAAU,CAAC,OAAO,CAAC;YACf,MAAM,CAAC,MAAM,GAAG,UAAU,CAAC,SAAS,EAAE,CAAC;YACvC,yBAAyB;YACzB,UAAU,CAAC,SAAS,CAAC,2BAA2B,EAAE,UAAS,QAAQ;gBAC/D,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBACpC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;gBAChF,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAsB,CAAC,GAAG,GAAG,GAAG,CAAC,UAAU,CAAC;gBAC7E,MAAM,CAAC,YAAY,EAAE,CAAC;YAC1B,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;IACH,MAAM,CAAC,GAAG,CAAC,wBAAwB,EAAE;QACjC,UAAU,CAAC,UAAU,EAAE,CAAC;IAC5B,CAAC,CAAC,CAAC;IAEH,QAAQ;IACR,MAAM,CAAC,YAAY,GAAG;QAClB,IAAI,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAqB,CAAC;QACrE,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC;QACtD,QAAQ,CAAC,IAAI,EAAE,CAAC;IACpB,CAAC,CAAC;AAEN,CAAC,CAAC,CAAC","file":"audio.js","sourcesContent":["/// <reference path=\"../typings/main.d.ts\"/>\r\n/// <reference path=\"services.ts\"/>\r\nangular.module('starter.controllers')\r\n\r\n.controller('AudioMonitorCtrl', function($scope, $stateParams, $log, $window, Settings, \r\n    LumenStomp: Services.LumenStomp) {\r\n    $scope.form = {\r\n    };\r\n\r\n    $scope.client = null;\r\n    $scope.$on('$ionicView.enter', function() {\r\n        LumenStomp.connect(function() {\r\n            $scope.client = LumenStomp.getClient();\r\n            // audio.out: AudioObject\r\n            LumenStomp.subscribe('/topic/avatar.*.audio.out', function(exchange) {\r\n                var msg = JSON.parse(exchange.body);\r\n                $log.info(\"Received audio\", msg.name, msg.contentType, msg.contentSize, 'bytes');\r\n                (document.getElementById('played') as HTMLMediaElement).src = msg.contentUrl;\r\n                $scope.replayPlayed();\r\n            });\r\n        });\r\n    });\r\n    $scope.$on('$ionicView.beforeLeave', function() {\r\n        LumenStomp.disconnect();\r\n    });\r\n\r\n    // Audio\r\n    $scope.replayPlayed = function() {\r\n        var playedEl = document.getElementById('played') as HTMLMediaElement;\r\n        $log.info('Playing played ', playedEl, 'seconds ...');\r\n        playedEl.play();\r\n    };\r\n\r\n});\r\n"],"sourceRoot":"/source/"}